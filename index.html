<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Podar Learn School Niphad - Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --white: #ffffff;
            --pink: #ec4899;
            --pink-light: #fce7f3;
            --blue: #3b82f6;
            --blue-light: #dbeafe;
            --black: #0f172a;
            --grey: #64748b;
            --grey-light: #f1f5f9;
            --grey-medium: #e2e8f0;
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
            --border: #e2e8f0;
            --shadow: rgba(0, 0, 0, 0.08);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background: var(--grey-light);
            color: var(--black);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .font-display {
            font-family: 'Space Grotesk', sans-serif;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: var(--white);
            border-right: 1px solid var(--border);
            z-index: 100;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 4px 0 20px var(--shadow);
        }

        .sidebar-header {
            padding: 24px 20px;
            border-bottom: 1px solid var(--border);
            background: linear-gradient(135deg, var(--pink-light), var(--blue-light));
        }

        .sidebar-nav {
            flex: 1;
            overflow-y: auto;
            padding: 16px 0;
        }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border);
            background: var(--grey-light);
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 14px 20px;
            margin: 2px 8px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.25s ease;
            color: var(--grey);
            font-size: 14px;
            font-weight: 500;
        }

        .sidebar-item:hover {
            background: var(--pink-light);
            color: var(--pink);
        }

        .sidebar-item.active {
            background: linear-gradient(135deg, var(--pink), #db2777);
            color: var(--white);
            box-shadow: 0 4px 15px rgba(236, 72, 153, 0.3);
        }

        .sidebar-item .emoji {
            font-size: 18px;
            width: 24px;
            text-align: center;
        }

        /* Main Content */
        .main-wrapper {
            margin-left: 280px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .main-header {
            padding: 20px 32px;
            background: var(--white);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 50;
            box-shadow: 0 2px 10px var(--shadow);
        }

        .main-content {
            padding: 24px 32px;
            flex: 1;
        }

        /* Cards */
        .card {
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px var(--shadow);
        }

        .card:hover {
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            transform: translateY(-2px);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 24px;
        }

        @media (max-width: 1200px) {
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 768px) {
            .stats-grid { grid-template-columns: 1fr; }
        }

        .stat-card {
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            opacity: 0.1;
            transform: translate(30%, -30%);
        }

        .stat-card.pink::before { background: var(--pink); }
        .stat-card.blue::before { background: var(--blue); }
        .stat-card.green::before { background: var(--success); }
        .stat-card.orange::before { background: var(--warning); }

        /* Quick Actions */
        .quick-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 24px;
        }

        .quick-btn {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 24px;
            background: var(--white);
            border: 2px solid var(--border);
            border-radius: 14px;
            cursor: pointer;
            transition: all 0.25s ease;
            font-size: 14px;
            font-weight: 600;
            color: var(--black);
        }

        .quick-btn:hover {
            border-color: var(--pink);
            background: var(--pink-light);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(236, 72, 153, 0.15);
        }

        .quick-btn .icon-wrap {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        /* Charts Grid */
        .charts-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 24px;
        }

        @media (max-width: 1024px) {
            .charts-grid { grid-template-columns: 1fr; }
        }

        .chart-box {
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 15px var(--shadow);
        }

        .chart-box canvas {
            max-height: 300px;
        }

        /* Bottom Grid */
        .bottom-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
            margin-bottom: 24px;
        }

        @media (max-width: 1024px) {
            .bottom-grid { grid-template-columns: 1fr; }
        }

        /* Table */
        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            text-align: left;
            padding: 14px 16px;
            background: var(--grey-light);
            color: var(--grey);
            font-weight: 600;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .data-table td {
            padding: 14px 16px;
            border-bottom: 1px solid var(--border);
            font-size: 14px;
            color: var(--black);
        }

        .data-table tbody tr:hover {
            background: var(--pink-light);
        }

        /* Buttons */
        .btn {
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.25s ease;
            border: none;
            font-family: 'Outfit', sans-serif;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--pink), #db2777);
            color: var(--white);
            box-shadow: 0 4px 15px rgba(236, 72, 153, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(236, 72, 153, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--blue), #2563eb);
            color: var(--white);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
        }

        .btn-ghost {
            background: var(--white);
            color: var(--black);
            border: 2px solid var(--border);
        }

        .btn-ghost:hover {
            border-color: var(--pink);
            background: var(--pink-light);
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 12px;
        }

        /* Form Inputs */
        .form-input {
            width: 100%;
            padding: 14px 16px;
            background: var(--white);
            border: 2px solid var(--border);
            border-radius: 12px;
            color: var(--black);
            font-family: 'Outfit', sans-serif;
            font-size: 14px;
            transition: all 0.25s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--pink);
            box-shadow: 0 0 0 4px var(--pink-light);
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--grey);
            font-weight: 500;
            font-size: 13px;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 200;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--white);
            border-radius: 20px;
            padding: 28px;
            max-width: 650px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalIn 0.3s ease;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
        }

        @keyframes modalIn {
            from { transform: scale(0.95); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid var(--border);
        }

        .modal-title {
            font-size: 22px;
            font-weight: 700;
        }

        .modal-close {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            background: var(--grey-light);
            border: none;
            color: var(--grey);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            background: var(--danger);
            color: var(--white);
        }

        /* Payment Methods */
        .payment-item {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 16px;
            background: var(--grey-light);
            border-radius: 12px;
            margin-bottom: 10px;
            transition: all 0.2s ease;
        }

        .payment-item:hover {
            background: var(--pink-light);
        }

        .payment-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
        }

        /* Activity */
        .activity-item {
            display: flex;
            gap: 14px;
            padding: 14px 0;
            border-bottom: 1px solid var(--border);
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--pink);
            margin-top: 5px;
            flex-shrink: 0;
        }

        /* Badges */
        .badge {
            padding: 5px 12px;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .badge-success { background: #dcfce7; color: #16a34a; }
        .badge-warning { background: #fef3c7; color: #d97706; }
        .badge-danger { background: #fee2e2; color: #dc2626; }
        .badge-pink { background: var(--pink-light); color: var(--pink); }
        .badge-blue { background: var(--blue-light); color: var(--blue); }

        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--grey-medium);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 1s ease;
        }

        /* Page Content */
        .page-content {
            display: none;
        }

        .page-content.active {
            display: block;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            border-radius: 14px;
            color: white;
            font-weight: 500;
            z-index: 300;
            animation: notifIn 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        @keyframes notifIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* File Input */
        .file-input-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }

        .file-input-wrapper input[type=file] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            cursor: pointer;
            width: 100%;
            height: 100%;
        }

        /* Settings Card */
        .settings-card {
            background: var(--white);
            border: 2px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            transition: all 0.3s ease;
        }

        .settings-card:hover {
            border-color: var(--pink);
        }

        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 26px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--grey-medium);
            border-radius: 26px;
            transition: 0.3s;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background: var(--white);
            border-radius: 50%;
            transition: 0.3s;
        }

        .toggle-switch input:checked + .toggle-slider {
            background: var(--pink);
        }

        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }

        /* Print Styles */
        @media print {
            body * { visibility: hidden; }
            .print-area, .print-area * { visibility: visible; }
            .print-area { position: absolute; left: 0; top: 0; width: 100%; }
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar { transform: translateX(-100%); }
            .sidebar.open { transform: translateX(0); }
            .main-wrapper { margin-left: 0; }
        }

        /* Mobile Toggle */
        .mobile-toggle {
            display: none;
            position: fixed;
            top: 16px;
            left: 16px;
            z-index: 150;
            width: 48px;
            height: 48px;
            border-radius: 14px;
            background: var(--white);
            border: 2px solid var(--border);
            color: var(--black);
            cursor: pointer;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px var(--shadow);
        }

        @media (max-width: 1024px) {
            .mobile-toggle { display: flex; }
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--grey-light); }
        ::-webkit-scrollbar-thumb { background: var(--grey-medium); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--pink); }
    </style>
</head>
<body>
    <!-- Mobile Toggle -->
    <button class="mobile-toggle" onclick="toggleSidebar()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="12" x2="21" y2="12"/>
            <line x1="3" y1="6" x2="21" y2="6"/>
            <line x1="3" y1="18" x2="21" y2="18"/>
        </svg>
    </button>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div style="display: flex; align-items: center; gap: 14px;">
                <div style="width: 50px; height: 50px; border-radius: 14px; background: linear-gradient(135deg, var(--pink), #db2777); display: flex; align-items: center; justify-content: center;">
                    <span class="font-display" style="font-weight: 700; font-size: 22px; color: white;">P</span>
                </div>
                <div>
                    <h2 class="font-display" style="font-size: 16px; font-weight: 700;">Podar Learn School</h2>
                    <p style="font-size: 13px; color: var(--grey);">Niphad</p>
                </div>
            </div>
        </div>

        <nav class="sidebar-nav">
            <div class="sidebar-item active" data-page="dashboard" onclick="switchPage('dashboard')">
                <span class="emoji">üè†</span>
                <span>Dashboard</span>
            </div>
            <div class="sidebar-item" data-page="students" onclick="switchPage('students')">
                <span class="emoji">üë®‚Äçüéì</span>
                <span>Students</span>
            </div>
            <div class="sidebar-item" data-page="fees" onclick="switchPage('fees')">
                <span class="emoji">üí∞</span>
                <span>Fee Collection</span>
            </div>
            <div class="sidebar-item" data-page="reports" onclick="switchPage('reports')">
                <span class="emoji">üìä</span>
                <span>Reports</span>
            </div>
            <div class="sidebar-item" data-page="qr" onclick="switchPage('qr')">
                <span class="emoji">üì∑</span>
                <span>QR Lookup</span>
            </div>
            <div class="sidebar-item" data-page="ai" onclick="switchPage('ai')">
                <span class="emoji">ü§ñ</span>
                <span>AI Assistant</span>
            </div>
            <div class="sidebar-item" data-page="settings" onclick="switchPage('settings')">
                <span class="emoji">‚öôÔ∏è</span>
                <span>Settings</span>
            </div>
        </nav>

        <div class="sidebar-footer">
            <div style="display: flex; align-items: center; gap: 12px;">
                <div style="width: 44px; height: 44px; border-radius: 12px; background: linear-gradient(135deg, var(--blue), #2563eb); display: flex; align-items: center; justify-content: center;">
                    <span style="font-weight: 600; font-size: 16px; color: white;">AC</span>
                </div>
                <div style="flex: 1; min-width: 0;">
                    <p style="font-weight: 600; font-size: 14px;">Accountant</p>
                    <p style="font-size: 11px; color: var(--grey); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">accountant@podar.edu.in</p>
                </div>
            </div>
        </div>
    </aside>

    <!-- Main Wrapper -->
    <div class="main-wrapper">
        <!-- Header -->
        <header class="main-header">
            <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 16px;">
                <div>
                    <p style="font-size: 13px; color: var(--grey); margin-bottom: 4px;" id="currentDate">Loading...</p>
                    <h1 class="font-display" style="font-size: 26px; font-weight: 700;">
                        <span id="greeting">Good Morning</span>, Accountant!
                    </h1>
                </div>
                <div style="display: flex; gap: 12px;">
                    <button class="btn btn-primary" onclick="openModal('newAdmission')">New Admission</button>
                    <button class="btn btn-secondary" onclick="openModal('collectFee')">Collect Fee</button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Page -->
            <div id="page-dashboard" class="page-content active">
                <!-- School Banner -->
                <div class="card" style="margin-bottom: 24px; background: linear-gradient(135deg, var(--pink-light), var(--blue-light));">
                    <div style="display: flex; align-items: center; gap: 16px; flex-wrap: wrap;">
                        <div style="width: 64px; height: 64px; border-radius: 16px; background: linear-gradient(135deg, var(--pink), #db2777); display: flex; align-items: center; justify-content: center;">
                            <span class="font-display" style="font-size: 28px; font-weight: 700; color: white;">P</span>
                        </div>
                        <div>
                            <h2 class="font-display" style="font-size: 20px; font-weight: 700;">Podar Learn School Niphad</h2>
                            <p style="font-size: 14px; color: var(--grey);">Academic Year 2026-27</p>
                        </div>
                        <div style="margin-left: auto;">
                            <span class="badge badge-success">All Systems Active</span>
                        </div>
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="card stat-card pink">
                        <p style="font-size: 13px; color: var(--grey); margin-bottom: 8px;">Total Students</p>
                        <p class="font-display" style="font-size: 32px; font-weight: 700;" id="statStudents">4,817</p>
                        <p style="font-size: 12px; color: var(--pink); margin-top: 6px; font-weight: 600;">All Active</p>
                    </div>

                    <div class="card stat-card green">
                        <p style="font-size: 13px; color: var(--grey); margin-bottom: 8px;">Fees Collected</p>
                        <p class="font-display" style="font-size: 26px; font-weight: 700;" id="statCollected">11,05,61,750</p>
                        <div style="display: flex; align-items: center; gap: 10px; margin-top: 8px;">
                            <div class="progress-bar" style="flex: 1;">
                                <div class="progress-fill" style="width: 48.1%; background: var(--success);"></div>
                            </div>
                            <span style="font-size: 12px; color: var(--success); font-weight: 600;">48.1%</span>
                        </div>
                    </div>

                    <div class="card stat-card orange">
                        <p style="font-size: 13px; color: var(--grey); margin-bottom: 8px;">Pending Fees</p>
                        <p class="font-display" style="font-size: 26px; font-weight: 700;" id="statPending">11,92,78,250</p>
                        <p style="font-size: 12px; color: var(--warning); margin-top: 6px; font-weight: 600;">3,106 Defaulters</p>
                    </div>

                    <div class="card stat-card blue">
                        <p style="font-size: 13px; color: var(--grey); margin-bottom: 8px;">Today's Collection</p>
                        <p class="font-display" style="font-size: 32px; font-weight: 700; color: var(--blue);" id="statToday">5,94,000</p>
                        <p style="font-size: 12px; color: var(--grey); margin-top: 6px;" id="receiptsToday">32 Receipts Today</p>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div style="margin-bottom: 24px;">
                    <h3 class="font-display" style="font-size: 18px; font-weight: 600; margin-bottom: 14px;">Quick Actions</h3>
                    <div class="quick-actions">
                        <button class="quick-btn" onclick="openModal('newAdmission')">
                            <div class="icon-wrap" style="background: linear-gradient(135deg, var(--pink), #db2777);">üë®‚Äçüéì</div>
                            <span>New Student</span>
                        </button>
                        <button class="quick-btn" onclick="openModal('collectFee')">
                            <div class="icon-wrap" style="background: linear-gradient(135deg, var(--success), #16a34a);">üí∞</div>
                            <span>Collect Fee</span>
                        </button>
                        <button class="quick-btn" onclick="switchPage('reports')">
                            <div class="icon-wrap" style="background: linear-gradient(135deg, var(--blue), #2563eb);">üìä</div>
                            <span>View Reports</span>
                        </button>
                        <button class="quick-btn" onclick="openModal('scanQR')">
                            <div class="icon-wrap" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">üì∑</div>
                            <span>Scan QR</span>
                        </button>
                        <button class="quick-btn" onclick="openModal('exportData')">
                            <div class="icon-wrap" style="background: linear-gradient(135deg, #f59e0b, #d97706);">üì•</div>
                            <span>Export Data</span>
                        </button>
                    </div>
                </div>

                <!-- Charts -->
                <div class="charts-grid">
                    <div class="chart-box">
                        <h3 class="font-display" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">Monthly Collection</h3>
                        <p style="font-size: 12px; color: var(--grey); margin-bottom: 16px;">Fee collection per month</p>
                        <canvas id="monthlyChart"></canvas>
                    </div>
                    <div class="chart-box">
                        <h3 class="font-display" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">Students by Class</h3>
                        <p style="font-size: 12px; color: var(--grey); margin-bottom: 16px;">Class-wise distribution</p>
                        <canvas id="classChart"></canvas>
                    </div>
                </div>

                <!-- Bottom Section -->
                <div class="bottom-grid">
                    <!-- Payment Methods -->
                    <div class="card">
                        <h3 class="font-display" style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">Payment Methods</h3>
                        <div class="payment-item">
                            <div class="payment-icon" style="background: var(--pink-light);">üì±</div>
                            <div style="flex: 1;">
                                <p style="font-weight: 600; font-size: 14px;">UPI</p>
                                <p style="font-size: 12px; color: var(--grey);">2,847 payments</p>
                            </div>
                            <span style="font-weight: 600; color: var(--pink);">49%</span>
                        </div>
                        <div class="payment-item">
                            <div class="payment-icon" style="background: var(--blue-light);">üíµ</div>
                            <div style="flex: 1;">
                                <p style="font-weight: 600; font-size: 14px;">Cash</p>
                                <p style="font-size: 12px; color: var(--grey);">1,523 payments</p>
                            </div>
                            <span style="font-weight: 600; color: var(--blue);">26%</span>
                        </div>
                        <div class="payment-item">
                            <div class="payment-icon" style="background: #dcfce7;">üí≥</div>
                            <div style="flex: 1;">
                                <p style="font-weight: 600; font-size: 14px;">Card</p>
                                <p style="font-size: 12px; color: var(--grey);">876 payments</p>
                            </div>
                            <span style="font-weight: 600; color: var(--success);">15%</span>
                        </div>
                        <div class="payment-item">
                            <div class="payment-icon" style="background: #fef3c7;">üìù</div>
                            <div style="flex: 1;">
                                <p style="font-weight: 600; font-size: 14px;">Cheque</p>
                                <p style="font-size: 12px; color: var(--grey);">362 payments</p>
                            </div>
                            <span style="font-weight: 600; color: var(--warning);">6%</span>
                        </div>
                        <div class="payment-item">
                            <div class="payment-icon" style="background: #e0e7ff;">üè¶</div>
                            <div style="flex: 1;">
                                <p style="font-weight: 600; font-size: 14px;">Bank Transfer</p>
                                <p style="font-size: 12px; color: var(--grey);">190 payments</p>
                            </div>
                            <span style="font-weight: 600; color: #6366f1;">4%</span>
                        </div>
                    </div>

                    <!-- Recent Payments -->
                    <div class="card">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <div>
                                <h3 class="font-display" style="font-size: 16px; font-weight: 600;">Recent Payments</h3>
                                <p style="font-size: 12px; color: var(--grey);">5,798 Total</p>
                            </div>
                            <button class="btn btn-ghost btn-sm" onclick="openModal('allPayments')">View All</button>
                        </div>
                        <div style="overflow-x: auto;">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Receipt</th>
                                        <th>Student</th>
                                        <th>Amount</th>
                                        <th>Mode</th>
                                    </tr>
                                </thead>
                                <tbody id="recentPaymentsTable"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Activity Log -->
                <div class="card" style="margin-top: 24px;">
                    <h3 class="font-display" style="font-size: 16px; font-weight: 600; margin-bottom: 12px;">Recent Activity</h3>
                    <div id="activityLog"></div>
                </div>
            </div>

            <!-- Students Page -->
            <div id="page-students" class="page-content">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px; flex-wrap: wrap; gap: 16px;">
                    <div>
                        <h1 class="font-display" style="font-size: 24px; font-weight: 700;">Students Management</h1>
                        <p style="font-size: 14px; color: var(--grey);">Manage all student records</p>
                    </div>
                    <div style="display: flex; gap: 12px;">
                        <button class="btn btn-primary" onclick="openModal('newAdmission')">Add New Student</button>
                        <button class="btn btn-secondary" onclick="openModal('exportData')">Export Data</button>
                    </div>
                </div>

                <!-- Filters -->
                <div class="card" style="margin-bottom: 20px;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px;">
                        <input type="text" class="form-input" placeholder="Search by name, ID..." id="studentSearchInput" onkeyup="searchStudents()">
                        <select class="form-input" id="classFilterSelect" onchange="filterStudents()">
                            <option value="">All Classes</option>
                            <option value="Nursery">Nursery</option>
                            <option value="LKG">LKG</option>
                            <option value="UKG">UKG</option>
                            <option value="1st">1st</option>
                            <option value="2nd">2nd</option>
                            <option value="3rd">3rd</option>
                            <option value="4th">4th</option>
                            <option value="5th">5th</option>
                            <option value="6th">6th</option>
                            <option value="7th">7th</option>
                            <option value="8th">8th</option>
                            <option value="9th">9th</option>
                            <option value="10th">10th</option>
                            <option value="11th">11th</option>
                            <option value="12th">12th</option>
                        </select>
                        <select class="form-input" id="statusFilterSelect" onchange="filterStudents()">
                            <option value="">All Status</option>
                            <option value="paid">Paid</option>
                            <option value="pending">Pending</option>
                            <option value="overdue">Overdue</option>
                        </select>
                    </div>
                </div>

                <!-- Students Table -->
                <div class="card">
                    <div style="overflow-x: auto;">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Student Name</th>
                                    <th>Class</th>
                                    <th>Parent</th>
                                    <th>Contact</th>
                                    <th>Fee Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="studentsTableBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Fee Collection Page -->
            <div id="page-fees" class="page-content">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px;">
                    <div>
                        <h1 class="font-display" style="font-size: 24px; font-weight: 700;">Fee Collection</h1>
                        <p style="font-size: 14px; color: var(--grey);">Manage fee payments and receipts</p>
                    </div>
                    <button class="btn btn-primary" onclick="openModal('collectFee')">Collect New Fee</button>
                </div>

                <!-- Fee Stats -->
                <div class="stats-grid" style="margin-bottom: 24px;">
                    <div class="card">
                        <p style="font-size: 13px; color: var(--grey); margin-bottom: 6px;">Total Expected</p>
                        <p class="font-display" style="font-size: 24px; font-weight: 700;">22,98,40,000</p>
                    </div>
                    <div class="card">
                        <p style="font-size: 13px; color: var(--grey); margin-bottom: 6px;">Collected</p>
                        <p class="font-display" style="font-size: 24px; font-weight: 700; color: var(--success);">11,05,61,750</p>
                    </div>
                    <div class="card">
                        <p style="font-size: 13px; color: var(--grey); margin-bottom: 6px;">Pending</p>
                        <p class="font-display" style="font-size: 24px; font-weight: 700; color: var(--warning);">11,92,78,250</p>
                    </div>
                    <div class="card">
                        <p style="font-size: 13px; color: var(--grey); margin-bottom: 6px;">Overdue</p>
                        <p class="font-display" style="font-size: 24px; font-weight: 700; color: var(--danger);">4,52,15,000</p>
                    </div>
                </div>

                <!-- Fee Records -->
                <div class="card">
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; flex-wrap: wrap; gap: 10px;">
                        <h3 class="font-display" style="font-size: 16px; font-weight: 600;">Fee Records</h3>
                        <div style="display: flex; gap: 8px;">
                            <button class="btn btn-ghost btn-sm" onclick="filterFeeRecords('all')">All</button>
                            <button class="btn btn-ghost btn-sm" onclick="filterFeeRecords('paid')">Paid</button>
                            <button class="btn btn-ghost btn-sm" onclick="filterFeeRecords('pending')">Pending</button>
                            <button class="btn btn-ghost btn-sm" onclick="filterFeeRecords('overdue')">Overdue</button>
                        </div>
                    </div>
                    <div style="overflow-x: auto;">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Receipt</th>
                                    <th>Student</th>
                                    <th>Class</th>
                                    <th>Amount</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="feeRecordsTable"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Reports Page -->
            <div id="page-reports" class="page-content">
                <div style="margin-bottom: 24px;">
                    <h1 class="font-display" style="font-size: 24px; font-weight: 700;">Reports & Analytics</h1>
                    <p style="font-size: 14px; color: var(--grey);">Generate and export comprehensive reports</p>
                </div>

                <!-- Chart Settings -->
                <div class="card" style="margin-bottom: 20px;">
                    <h3 class="font-display" style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">Chart Settings</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
                        <div>
                            <label class="form-label">Chart Theme</label>
                            <select class="form-input" id="chartTheme" onchange="updateChartTheme()">
                                <option value="pink">Pink Theme</option>
                                <option value="blue">Blue Theme</option>
                                <option value="green">Green Theme</option>
                                <option value="orange">Orange Theme</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Chart Type</label>
                            <select class="form-input" id="chartType" onchange="updateChartType()">
                                <option value="bar">Bar Chart</option>
                                <option value="line">Line Chart</option>
                                <option value="doughnut">Doughnut</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Animation</label>
                            <label class="toggle-switch">
                                <input type="checkbox" checked id="chartAnimation">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Report Types -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 24px;">
                    <div class="card" style="cursor: pointer;" onclick="generateReport('collection')">
                        <div style="display: flex; align-items: center; gap: 14px; margin-bottom: 12px;">
                            <div style="width: 50px; height: 50px; border-radius: 14px; background: var(--pink-light); display: flex; align-items: center; justify-content: center; font-size: 24px;">üìà</div>
                            <h3 class="font-display" style="font-size: 16px; font-weight: 600;">Collection Report</h3>
                        </div>
                        <p style="font-size: 13px; color: var(--grey);">Daily, weekly, monthly fee collection</p>
                    </div>

                    <div class="card" style="cursor: pointer;" onclick="generateReport('defaulter')">
                        <div style="display: flex; align-items: center; gap: 14px; margin-bottom: 12px;">
                            <div style="width: 50px; height: 50px; border-radius: 14px; background: var(--blue-light); display: flex; align-items: center; justify-content: center; font-size: 24px;">‚ö†Ô∏è</div>
                            <h3 class="font-display" style="font-size: 16px; font-weight: 600;">Defaulter Report</h3>
                        </div>
                        <p style="font-size: 13px; color: var(--grey);">Students with pending fees</p>
                    </div>

                    <div class="card" style="cursor: pointer;" onclick="generateReport('student')">
                        <div style="display: flex; align-items: center; gap: 14px; margin-bottom: 12px;">
                            <div style="width: 50px; height: 50px; border-radius: 14px; background: #dcfce7; display: flex; align-items: center; justify-content: center; font-size: 24px;">üë®‚Äçüéì</div>
                            <h3 class="font-display" style="font-size: 16px; font-weight: 600;">Student Report</h3>
                        </div>
                        <p style="font-size: 13px; color: var(--grey);">Class-wise distribution</p>
                    </div>

                    <div class="card" style="cursor: pointer;" onclick="generateReport('payment')">
                        <div style="display: flex; align-items: center; gap: 14px; margin-bottom: 12px;">
                            <div style="width: 50px; height: 50px; border-radius: 14px; background: #fef3c7; display: flex; align-items: center; justify-content: center; font-size: 24px;">üí≥</div>
                            <h3 class="font-display" style="font-size: 16px; font-weight: 600;">Payment Methods</h3>
                        </div>
                        <p style="font-size: 13px; color: var(--grey);">Analysis of payment modes</p>
                    </div>

                    <div class="card" style="cursor: pointer;" onclick="generateReport('admission')">
                        <div style="display: flex; align-items: center; gap: 14px; margin-bottom: 12px;">
                            <div style="width: 50px; height: 50px; border-radius: 14px; background: #e0e7ff; display: flex; align-items: center; justify-content: center; font-size: 24px;">üìù</div>
                            <h3 class="font-display" style="font-size: 16px; font-weight: 600;">Admission Report</h3>
                        </div>
                        <p style="font-size: 13px; color: var(--grey);">New admissions and trends</p>
                    </div>

                    <div class="card" style="cursor: pointer;" onclick="openModal('exportData')">
                        <div style="display: flex; align-items: center; gap: 14px; margin-bottom: 12px;">
                            <div style="width: 50px; height: 50px; border-radius: 14px; background: #fce7f3; display: flex; align-items: center; justify-content: center; font-size: 24px;">üì•</div>
                            <h3 class="font-display" style="font-size: 16px; font-weight: 600;">Export All Data</h3>
                        </div>
                        <p style="font-size: 13px; color: var(--grey);">Download Excel, PDF reports</p>
                    </div>
                </div>

                <!-- Report Preview -->
                <div class="card">
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                        <h3 class="font-display" style="font-size: 16px; font-weight: 600;">Report Preview</h3>
                        <button class="btn btn-primary btn-sm" onclick="exportCurrentReport()">Export Report</button>
                    </div>
                    <canvas id="reportChart" style="max-height: 300px;"></canvas>
                </div>
            </div>

            <!-- QR Lookup Page -->
            <div id="page-qr" class="page-content">
                <div style="margin-bottom: 24px;">
                    <h1 class="font-display" style="font-size: 24px; font-weight: 700;">QR Lookup</h1>
                    <p style="font-size: 14px; color: var(--grey);">Scan student QR codes to view details</p>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px;">
                    <div class="card">
                        <h3 class="font-display" style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">Scan QR Code</h3>
                        <div style="border: 2px dashed var(--border); border-radius: 16px; padding: 40px; text-align: center; background: var(--grey-light);">
                            <div id="qrPreview" style="width: 120px; height: 120px; margin: 0 auto 20px; border-radius: 16px; background: var(--white); display: flex; align-items: center; justify-content: center; border: 2px solid var(--border);">
                                <svg width="50" height="50" viewBox="0 0 24 24" fill="none" stroke="var(--grey)" stroke-width="1.5">
                                    <rect x="3" y="3" width="7" height="7"/>
                                    <rect x="14" y="3" width="7" height="7"/>
                                    <rect x="3" y="14" width="7" height="7"/>
                                    <rect x="14" y="14" width="7" height="7"/>
                                </svg>
                            </div>
                            <p style="font-size: 14px; color: var(--grey); margin-bottom: 20px;">Click to start camera or upload QR image</p>
                            <div style="display: flex; gap: 12px; justify-content: center; flex-wrap: wrap;">
                                <button class="btn btn-primary" onclick="startScan()">Start Scan</button>
                                <div class="file-input-wrapper">
                                    <button class="btn btn-secondary">Upload Image</button>
                                    <input type="file" accept="image/*" onchange="handleQRUpload(event)" id="qrFileInput">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="font-display" style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">Manual Lookup</h3>
                        <div style="margin-bottom: 16px;">
                            <label class="form-label">Student ID</label>
                            <input type="text" class="form-input" placeholder="Enter ID (e.g., STU-2026-0001)" id="manualLookupId">
                        </div>
                        <button class="btn btn-primary" style="width: 100%;" onclick="manualLookup()">Lookup Student</button>
                        <div id="lookupResult" style="margin-top: 20px;"></div>
                    </div>
                </div>
            </div>

            <!-- AI Assistant Page -->
            <div id="page-ai" class="page-content">
                <div style="margin-bottom: 24px;">
                    <h1 class="font-display" style="font-size: 24px; font-weight: 700;">AI Assistant</h1>
                    <p style="font-size: 14px; color: var(--grey);">Get intelligent help with school management</p>
                </div>

                <div class="card" style="height: 520px; display: flex; flex-direction: column;">
                    <div id="chatMessages" style="flex: 1; overflow-y: auto; padding: 20px; margin-bottom: 16px;">
                        <div style="display: flex; gap: 12px; margin-bottom: 16px;">
                            <div style="width: 40px; height: 40px; border-radius: 12px; background: linear-gradient(135deg, var(--pink), #db2777); display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 18px;">ü§ñ</div>
                            <div style="background: var(--grey-light); border-radius: 16px; padding: 16px; max-width: 70%;">
                                <p style="font-size: 14px;">Hello! I'm your school management AI assistant. I can help you with:</p>
                                <ul style="margin-top: 10px; padding-left: 20px; font-size: 13px; color: var(--grey);">
                                    <li>Fee collection queries</li>
                                    <li>Student information lookup</li>
                                    <li>Report generation</li>
                                    <li>Data analysis and insights</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div style="border-top: 2px solid var(--border); padding-top: 16px;">
                        <div style="display: flex; gap: 12px;">
                            <input type="text" class="form-input" placeholder="Ask me anything..." id="aiInputField" onkeypress="handleAIEnter(event)">
                            <button class="btn btn-primary" onclick="sendAIMessage()">Send</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Page -->
            <div id="page-settings" class="page-content">
                <div style="margin-bottom: 24px;">
                    <h1 class="font-display" style="font-size: 24px; font-weight: 700;">Settings</h1>
                    <p style="font-size: 14px; color: var(--grey);">Configure your school management system</p>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(340px, 1fr)); gap: 20px;">
                    <div class="card">
                        <h3 class="font-display" style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">School Information</h3>
                        <div style="display: flex; flex-direction: column; gap: 14px;">
                            <div>
                                <label class="form-label">School Name</label>
                                <input type="text" class="form-input" value="Podar Learn School Niphad" id="settingSchoolName">
                            </div>
                            <div>
                                <label class="form-label">Academic Year</label>
                                <select class="form-input" id="settingYear">
                                    <option value="2026-27" selected>2026-27</option>
                                    <option value="2025-26">2025-26</option>
                                </select>
                            </div>
                            <div>
                                <label class="form-label">Address</label>
                                <textarea class="form-input" rows="2" id="settingAddress">Niphad, Maharashtra, India</textarea>
                            </div>
                            <button class="btn btn-primary" onclick="saveSettings()">Save Changes</button>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="font-display" style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">Fee Settings</h3>
                        <div style="display: flex; flex-direction: column; gap: 14px;">
                            <div>
                                <label class="form-label">Late Fee (Monthly)</label>
                                <input type="number" class="form-input" value="500" id="settingLateFee">
                            </div>
                            <div>
                                <label class="form-label">Fee Due Date</label>
                                <input type="date" class="form-input" value="2026-04-15" id="settingDueDate">
                            </div>
                            <div>
                                <label class="form-label">Currency Symbol</label>
                                <input type="text" class="form-input" value="‚Çπ" id="settingCurrency" maxlength="2">
                            </div>
                            <button class="btn btn-primary" onclick="saveSettings()">Save Changes</button>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="font-display" style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">Notifications</h3>
                        <div style="display: flex; flex-direction: column; gap: 14px;">
                            <div style="display: flex; align-items: center; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--border);">
                                <span style="font-size: 14px;">Email Notifications</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div style="display: flex; align-items: center; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--border);">
                                <span style="font-size: 14px;">SMS Notifications</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div style="display: flex; align-items: center; justify-content: space-between; padding: 12px 0;">
                                <span style="font-size: 14px;">Payment Reminders</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="font-display" style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">Data Management</h3>
                        <div style="display: flex; flex-direction: column; gap: 12px;">
                            <button class="btn btn-ghost" onclick="backupData()" style="width: 100%;">Backup Data</button>
                            <div class="file-input-wrapper" style="width: 100%;">
                                <button class="btn btn-ghost" style="width: 100%;">Import Data</button>
                                <input type="file" accept=".xlsx,.xls,.csv" onchange="importData(event)">
                            </div>
                            <button class="btn btn-ghost" onclick="clearData()" style="width: 100%; color: var(--danger); border-color: rgba(239, 68, 68, 0.3);">Clear All Data</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- MODALS -->
    <!-- New Admission Modal -->
    <div class="modal-overlay" id="modal-newAdmission">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title font-display">Add New Student</h2>
                <button class="modal-close" onclick="closeModal('newAdmission')">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <form onsubmit="submitNewStudent(event)">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 14px;">
                    <div>
                        <label class="form-label">First Name</label>
                        <input type="text" class="form-input" required id="newStudentFName">
                    </div>
                    <div>
                        <label class="form-label">Last Name</label>
                        <input type="text" class="form-input" required id="newStudentLName">
                    </div>
                    <div>
                        <label class="form-label">Class</label>
                        <select class="form-input" required id="newStudentClass">
                            <option value="">Select Class</option>
                            <option value="Nursery">Nursery</option>
                            <option value="LKG">LKG</option>
                            <option value="UKG">UKG</option>
                            <option value="1st">1st</option>
                            <option value="2nd">2nd</option>
                            <option value="3rd">3rd</option>
                            <option value="4th">4th</option>
                            <option value="5th">5th</option>
                            <option value="6th">6th</option>
                            <option value="7th">7th</option>
                            <option value="8th">8th</option>
                            <option value="9th">9th</option>
                            <option value="10th">10th</option>
                            <option value="11th">11th</option>
                            <option value="12th">12th</option>
                        </select>
                    </div>
                    <div>
                        <label class="form-label">Section</label>
                        <select class="form-input" required id="newStudentSection">
                            <option value="">Select</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                        </select>
                    </div>
                    <div>
                        <label class="form-label">Parent Name</label>
                        <input type="text" class="form-input" required id="newStudentParent">
                    </div>
                    <div>
                        <label class="form-label">Contact</label>
                        <input type="tel" class="form-input" required id="newStudentContact">
                    </div>
                    <div>
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="newStudentEmail">
                    </div>
                    <div>
                        <label class="form-label">DOB</label>
                        <input type="date" class="form-input" required id="newStudentDOB">
                    </div>
                </div>
                <div style="margin-top: 14px;">
                    <label class="form-label">Address</label>
                    <textarea class="form-input" rows="2" id="newStudentAddress"></textarea>
                </div>
                <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                    <button type="button" class="btn btn-ghost" onclick="closeModal('newAdmission')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Student</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Collect Fee Modal -->
    <div class="modal-overlay" id="modal-collectFee">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title font-display">Collect Fee</h2>
                <button class="modal-close" onclick="closeModal('collectFee')">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <form onsubmit="submitFeeCollection(event)">
                <div style="display: flex; flex-direction: column; gap: 14px;">
                    <div>
                        <label class="form-label">Search Student</label>
                        <input type="text" class="form-input" placeholder="Enter name or ID..." id="feeSearchStudent" onkeyup="searchFeeStudent()">
                        <div id="feeSearchResults" style="margin-top: 8px;"></div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 14px;">
                        <div>
                            <label class="form-label">Student Name</label>
                            <input type="text" class="form-input" id="feeStudentName" readonly>
                        </div>
                        <div>
                            <label class="form-label">Class</label>
                            <input type="text" class="form-input" id="feeStudentClass" readonly>
                        </div>
                    </div>
                    <div>
                        <label class="form-label">Fee Type</label>
                        <select class="form-input" required id="feeTypeSelect">
                            <option value="">Select</option>
                            <option value="Tuition Fee">Tuition Fee</option>
                            <option value="Admission Fee">Admission Fee</option>
                            <option value="Exam Fee">Exam Fee</option>
                            <option value="Transport Fee">Transport Fee</option>
                            <option value="Library Fee">Library Fee</option>
                            <option value="Lab Fee">Lab Fee</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 14px;">
                        <div>
                            <label class="form-label">Amount</label>
                            <input type="number" class="form-input" required id="feeAmountInput" placeholder="Enter amount">
                        </div>
                        <div>
                            <label class="form-label">Payment Mode</label>
                            <select class="form-input" required id="feeModeSelect">
                                <option value="">Select</option>
                                <option value="UPI">UPI</option>
                                <option value="Cash">Cash</option>
                                <option value="Card">Card</option>
                                <option value="Cheque">Cheque</option>
                                <option value="Bank Transfer">Bank Transfer</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label class="form-label">Remarks</label>
                        <textarea class="form-input" rows="2" id="feeRemarks" placeholder="Any notes..."></textarea>
                    </div>
                </div>
                <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                    <button type="button" class="btn btn-ghost" onclick="closeModal('collectFee')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Collect & Receipt</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Receipt Modal -->
    <div class="modal-overlay" id="modal-receipt">
        <div class="modal print-area" style="max-width: 440px;">
            <div id="receiptContent" style="text-align: center;">
                <div style="width: 60px; height: 60px; margin: 0 auto 12px; border-radius: 16px; background: linear-gradient(135deg, var(--pink), #db2777); display: flex; align-items: center; justify-content: center;">
                    <span class="font-display" style="font-size: 24px; font-weight: 700; color: white;">P</span>
                </div>
                <h2 class="font-display" style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">Podar Learn School Niphad</h2>
                <p style="font-size: 12px; color: var(--grey); margin-bottom: 20px;">Fee Receipt</p>
                
                <div style="background: var(--grey-light); border-radius: 12px; padding: 16px; text-align: left; margin-bottom: 16px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 13px;">
                        <p style="color: var(--grey);">Receipt No:</p>
                        <p style="font-weight: 600;" id="rcptNo">-</p>
                        <p style="color: var(--grey);">Date:</p>
                        <p style="font-weight: 600;" id="rcptDate">-</p>
                        <p style="color: var(--grey);">Student:</p>
                        <p style="font-weight: 600;" id="rcptStudent">-</p>
                        <p style="color: var(--grey);">Class:</p>
                        <p style="font-weight: 600;" id="rcptClass">-</p>
                        <p style="color: var(--grey);">Fee Type:</p>
                        <p style="font-weight: 600;" id="rcptFeeType">-</p>
                        <p style="color: var(--grey);">Amount:</p>
                        <p style="font-weight: 700; color: var(--pink); font-size: 16px;" id="rcptAmount">-</p>
                        <p style="color: var(--grey);">Mode:</p>
                        <p style="font-weight: 600;" id="rcptMode">-</p>
                    </div>
                </div>
                
                <p style="font-size: 12px; color: var(--grey); margin-bottom: 16px;">Thank you for your payment!</p>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-ghost" style="flex: 1;" onclick="closeModal('receipt')">Close</button>
                    <button class="btn btn-primary" style="flex: 1;" onclick="printReceipt()">Print</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scan QR Modal -->
    <div class="modal-overlay" id="modal-scanQR">
        <div class="modal" style="max-width: 500px;">
            <div class="modal-header">
                <h2 class="modal-title font-display">Scan QR Code</h2>
                <button class="modal-close" onclick="closeModal('scanQR')">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div style="text-align: center;">
                <div id="scannerPreview" style="width: 220px; height: 220px; margin: 0 auto 20px; border: 2px solid var(--border); border-radius: 16px; display: flex; align-items: center; justify-content: center; background: var(--grey-light);">
                    <p style="color: var(--grey);">Camera View</p>
                </div>
                <p style="font-size: 14px; color: var(--grey); margin-bottom: 16px;">Point camera at student QR code</p>
                <button class="btn btn-primary" onclick="simulateScan()">Simulate Scan (Demo)</button>
            </div>
        </div>
    </div>

    <!-- Export Data Modal -->
    <div class="modal-overlay" id="modal-exportData">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title font-display">Export Data</h2>
                <button class="modal-close" onclick="closeModal('exportData')">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div style="display: flex; flex-direction: column; gap: 14px;">
                <div>
                    <label class="form-label">Select Data Type</label>
                    <select class="form-input" id="exportType">
                        <option value="all">All Students</option>
                        <option value="class">Class-wise Students</option>
                        <option value="fees">Fee Records</option>
                        <option value="payments">Payment History</option>
                        <option value="defaulters">Defaulter List</option>
                    </select>
                </div>
                <div id="classSelectDiv" style="display: none;">
                    <label class="form-label">Select Class</label>
                    <select class="form-input" id="exportClass">
                        <option value="">All Classes</option>
                        <option value="Nursery">Nursery</option>
                        <option value="LKG">LKG</option>
                        <option value="UKG">UKG</option>
                        <option value="1st">1st</option>
                        <option value="2nd">2nd</option>
                        <option value="3rd">3rd</option>
                        <option value="4th">4th</option>
                        <option value="5th">5th</option>
                        <option value="6th">6th</option>
                        <option value="7th">7th</option>
                        <option value="8th">8th</option>
                        <option value="9th">9th</option>
                        <option value="10th">10th</option>
                        <option value="11th">11th</option>
                        <option value="12th">12th</option>
                    </select>
                </div>
                <div style="display: flex; gap: 12px; margin-top: 10px;">
                    <button class="btn btn-primary" style="flex: 1;" onclick="exportToExcel()">
                        <span>üìä</span> Export Excel
                    </button>
                    <button class="btn btn-secondary" style="flex: 1;" onclick="exportToPDF()">
                        <span>üìÑ</span> Export PDF
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- All Payments Modal -->
    <div class="modal-overlay" id="modal-allPayments">
        <div class="modal" style="max-width: 850px;">
            <div class="modal-header">
                <h2 class="modal-title font-display">All Payments</h2>
                <button class="modal-close" onclick="closeModal('allPayments')">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div style="overflow-x: auto; max-height: 420px;">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Receipt</th>
                            <th>Student</th>
                            <th>Amount</th>
                            <th>Mode</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody id="allPaymentsTable"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Student Details Modal -->
    <div class="modal-overlay" id="modal-studentDetails">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title font-display">Student Details</h2>
                <button class="modal-close" onclick="closeModal('studentDetails')">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div id="studentDetailsContent"></div>
        </div>
    </div>

    <script>
        // =============================================
        // DATA STORE
        // =============================================
        const studentsDB = [
            { id: 'STU-2026-0001', firstName: 'Aarav', lastName: 'Sharma', class: '5th', section: 'A', parent: 'Rajesh Sharma', contact: '9876543210', feeStatus: 'paid' },
            { id: 'STU-2026-0002', firstName: 'Ananya', lastName: 'Patel', class: '4th', section: 'B', parent: 'Vikram Patel', contact: '9876543211', feeStatus: 'pending' },
            { id: 'STU-2026-0003', firstName: 'Arjun', lastName: 'Kumar', class: '3rd', section: 'A', parent: 'Suresh Kumar', contact: '9876543212', feeStatus: 'paid' },
            { id: 'STU-2026-0004', firstName: 'Diya', lastName: 'Singh', class: '2nd', section: 'C', parent: 'Mohan Singh', contact: '9876543213', feeStatus: 'overdue' },
            { id: 'STU-2026-0005', firstName: 'Ishaan', lastName: 'Verma', class: '1st', section: 'A', parent: 'Amit Verma', contact: '9876543214', feeStatus: 'paid' },
            { id: 'STU-2026-0006', firstName: 'Kavya', lastName: 'Gupta', class: 'UKG', section: 'B', parent: 'Rahul Gupta', contact: '9876543215', feeStatus: 'pending' },
            { id: 'STU-2026-0007', firstName: 'Vihaan', lastName: 'Joshi', class: 'LKG', section: 'A', parent: 'Sanjay Joshi', contact: '9876543216', feeStatus: 'paid' },
            { id: 'STU-2026-0008', firstName: 'Myra', lastName: 'Yadav', class: 'Nursery', section: 'C', parent: 'Krishna Yadav', contact: '9876543217', feeStatus: 'paid' },
            { id: 'STU-2026-0009', firstName: 'Ramesh', lastName: 'Patel', class: '7th', section: 'E', parent: 'Magan Patel', contact: '9876543218', feeStatus: 'paid' },
            { id: 'STU-2026-0010', firstName: 'Nikhil', lastName: 'Mahajan', class: '6th', section: 'D', parent: 'Dilip Mahajan', contact: '9876543219', feeStatus: 'paid' },
            { id: 'STU-2026-0011', firstName: 'Priya', lastName: 'Shah', class: '8th', section: 'B', parent: 'Nitin Shah', contact: '9876543220', feeStatus: 'paid' },
            { id: 'STU-2026-0012', firstName: 'Rahul', lastName: 'Mehta', class: '9th', section: 'A', parent: 'Vikram Mehta', contact: '9876543221', feeStatus: 'pending' },
            { id: 'STU-2026-0013', firstName: 'Sneha', lastName: 'Jain', class: '10th', section: 'C', parent: 'Prakash Jain', contact: '9876543222', feeStatus: 'paid' },
            { id: 'STU-2026-0014', firstName: 'Aditya', lastName: 'Reddy', class: '11th', section: 'A', parent: 'Suresh Reddy', contact: '9876543223', feeStatus: 'overdue' },
            { id: 'STU-2026-0015', firstName: 'Pooja', lastName: 'Nair', class: '12th', section: 'B', parent: 'Krishnan Nair', contact: '9876543224', feeStatus: 'paid' },
        ];

        const paymentsDB = [
            { receipt: 'REC-2026-026523', student: 'Ramesh Patel', class: '7th-E', amount: 13000, mode: 'Cheque', date: '25 Feb 2026' },
            { receipt: 'REC-2026-026057', student: 'Nikhil Mahajan', class: '6th-D', amount: 12000, mode: 'Bank Transfer', date: '25 Feb 2026' },
            { receipt: 'REC-2026-026015', student: 'Geeta Chauhan', class: '6th-E', amount: 12000, mode: 'Cheque', date: '24 Feb 2026' },
            { receipt: 'REC-2026-025928', student: 'Ashok Malik', class: '6th-A', amount: 12000, mode: 'Card', date: '24 Feb 2026' },
            { receipt: 'REC-2026-025548', student: 'Padma Kadam', class: '5th-D', amount: 24000, mode: 'UPI', date: '23 Feb 2026' },
            { receipt: 'REC-2026-025421', student: 'Suresh Patil', class: '4th-B', amount: 11000, mode: 'Cash', date: '23 Feb 2026' },
            { receipt: 'REC-2026-025312', student: 'Meena Devi', class: '3rd-C', amount: 10500, mode: 'UPI', date: '22 Feb 2026' },
        ];

        const activityDB = [
            { title: 'Fee collection for Academic Year 2026-27 started', time: '2026-04-01 09:00 AM' },
            { title: '5,000 students enrolled for new academic session', time: '2026-04-01 10:00 AM' },
            { title: 'New admissions open for Nursery to 12th', time: '2026-03-15 11:00 AM' },
            { title: 'Cloud backup system activated', time: '2026-04-02 09:00 AM' },
            { title: 'Fee structure updated for new academic year', time: '2026-03-20 02:00 PM' },
        ];

        let receiptCounter = 27000;
        let monthlyChartInstance = null;
        let classChartInstance = null;
        let reportChartInstance = null;

        // =============================================
        // INITIALIZATION
        // =============================================
        document.addEventListener('DOMContentLoaded', function() {
            updateDateGreeting();
            renderRecentPayments();
            renderActivityLog();
            renderStudentsTable();
            renderFeeRecords();
            initCharts();
            initReportChart();
            
            // Export type change handler
            document.getElementById('exportType').addEventListener('change', function() {
                document.getElementById('classSelectDiv').style.display = this.value === 'class' ? 'block' : 'none';
            });
        });

        // =============================================
        // DATE & GREETING
        // =============================================
        function updateDateGreeting() {
            const now = new Date();
            const options = { weekday: 'short', day: 'numeric', month: 'short', year: 'numeric' };
            document.getElementById('currentDate').textContent = now.toLocaleDateString('en-IN', options);
            
            const hour = now.getHours();
            let greeting = 'Good Morning';
            if (hour >= 12 && hour < 17) greeting = 'Good Afternoon';
            else if (hour >= 17) greeting = 'Good Evening';
            
            document.getElementById('greeting').textContent = greeting;
        }

        // =============================================
        // SIDEBAR & NAVIGATION
        // =============================================
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
        }

        function switchPage(pageName) {
            document.querySelectorAll('.page-content').forEach(page => page.classList.remove('active'));
            document.getElementById('page-' + pageName).classList.add('active');
            
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.page === pageName) {
                    item.classList.add('active');
                }
            });
            
            document.getElementById('sidebar').classList.remove('open');
        }

        // =============================================
        // MODAL FUNCTIONS
        // =============================================
        function openModal(modalName) {
            document.getElementById('modal-' + modalName).classList.add('active');
        }

        function closeModal(modalName) {
            document.getElementById('modal-' + modalName).classList.remove('active');
        }

        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
        });

        // =============================================
        // RENDER FUNCTIONS
        // =============================================
        function renderRecentPayments() {
            const tbody = document.getElementById('recentPaymentsTable');
            tbody.innerHTML = paymentsDB.slice(0, 5).map(p => `
                <tr>
                    <td style="font-family: monospace; font-size: 12px;">${p.receipt}</td>
                    <td>
                        <p style="font-weight: 500;">${p.student}</p>
                        <p style="font-size: 11px; color: var(--grey);">${p.class}</p>
                    </td>
                    <td style="font-weight: 600; color: var(--pink);">‚Çπ${p.amount.toLocaleString('en-IN')}</td>
                    <td><span class="badge ${getModeBadge(p.mode)}">${p.mode}</span></td>
                </tr>
            `).join('');
        }

        function renderAllPayments() {
            const tbody = document.getElementById('allPaymentsTable');
            tbody.innerHTML = paymentsDB.map(p => `
                <tr>
                    <td style="font-family: monospace; font-size: 12px;">${p.receipt}</td>
                    <td>
                        <p style="font-weight: 500;">${p.student}</p>
                        <p style="font-size: 11px; color: var(--grey);">${p.class}</p>
                    </td>
                    <td style="font-weight: 600; color: var(--pink);">‚Çπ${p.amount.toLocaleString('en-IN')}</td>
                    <td><span class="badge ${getModeBadge(p.mode)}">${p.mode}</span></td>
                    <td style="color: var(--grey); font-size: 12px;">${p.date}</td>
                </tr>
            `).join('');
            openModal('allPayments');
        }

        function renderActivityLog() {
            const container = document.getElementById('activityLog');
            container.innerHTML = activityDB.map(a => `
                <div class="activity-item">
                    <div class="activity-dot"></div>
                    <div>
                        <p style="font-weight: 500; font-size: 14px;">${a.title}</p>
                        <p style="font-size: 12px; color: var(--grey);">${a.time}</p>
                    </div>
                </div>
            `).join('');
        }

        function renderStudentsTable() {
            const tbody = document.getElementById('studentsTableBody');
            tbody.innerHTML = studentsDB.map(s => `
                <tr>
                    <td style="font-family: monospace; font-size: 12px;">${s.id}</td>
                    <td style="font-weight: 500;">${s.firstName} ${s.lastName}</td>
                    <td>${s.class}-${s.section}</td>
                    <td>${s.parent}</td>
                    <td>${s.contact}</td>
                    <td><span class="badge ${getStatusBadge(s.feeStatus)}">${s.feeStatus}</span></td>
                    <td>
                        <div style="display: flex; gap: 6px;">
                            <button class="btn btn-ghost btn-sm" onclick="viewStudent('${s.id}')">View</button>
                            <button class="btn btn-ghost btn-sm" onclick="editStudent('${s.id}')">Edit</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function renderFeeRecords() {
            const tbody = document.getElementById('feeRecordsTable');
            const records = [
                { receipt: 'REC-2026-001', student: 'Aarav Sharma', class: '5th-A', amount: 24000, date: '20 Feb 2026', status: 'paid' },
                { receipt: 'REC-2026-002', student: 'Ananya Patel', class: '4th-B', amount: 22000, date: '20 Feb 2026', status: 'pending' },
                { receipt: 'REC-2026-003', student: 'Arjun Kumar', class: '3rd-A', amount: 21000, date: '19 Feb 2026', status: 'paid' },
                { receipt: 'REC-2026-004', student: 'Diya Singh', class: '2nd-C', amount: 20000, date: '15 Feb 2026', status: 'overdue' },
            ];
            
            tbody.innerHTML = records.map(r => `
                <tr>
                    <td style="font-family: monospace; font-size: 12px;">${r.receipt}</td>
                    <td style="font-weight: 500;">${r.student}</td>
                    <td>${r.class}</td>
                    <td style="font-weight: 600;">‚Çπ${r.amount.toLocaleString('en-IN')}</td>
                    <td style="color: var(--grey); font-size: 12px;">${r.date}</td>
                    <td><span class="badge ${getStatusBadge(r.status)}">${r.status}</span></td>
                    <td><button class="btn btn-ghost btn-sm" onclick="viewReceiptById('${r.receipt}')">View</button></td>
                </tr>
            `).join('');
        }

        // =============================================
        // CHARTS
        // =============================================
        function initCharts() {
            const chartColors = {
                pink: { primary: '#ec4899', gradient: ['rgba(236, 72, 153, 0.8)', 'rgba(236, 72, 153, 0.1)'] },
                blue: { primary: '#3b82f6', gradient: ['rgba(59, 130, 246, 0.8)', 'rgba(59, 130, 246, 0.1)'] },
                green: { primary: '#22c55e', gradient: ['rgba(34, 197, 94, 0.8)', 'rgba(34, 197, 94, 0.1)'] },
                orange: { primary: '#f59e0b', gradient: ['rgba(245, 158, 11, 0.8)', 'rgba(245, 158, 11, 0.1)'] }
            };

            const currentTheme = chartColors.pink;

            // Monthly Chart
            const monthlyCtx = document.getElementById('monthlyChart').getContext('2d');
            monthlyChartInstance = new Chart(monthlyCtx, {
                type: 'bar',
                data: {
                    labels: ['Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec', 'Jan', 'Feb', 'Mar'],
                    datasets: [{
                        label: 'Collection',
                        data: [85, 72, 61, 58, 92, 88, 75, 69, 110, 95, 110, 0],
                        backgroundColor: (context) => {
                            const ctx = context.chart.ctx;
                            const gradient = ctx.createLinearGradient(0, 0, 0, 250);
                            gradient.addColorStop(0, currentTheme.gradient[0]);
                            gradient.addColorStop(1, currentTheme.gradient[1]);
                            return gradient;
                        },
                        borderColor: currentTheme.primary,
                        borderWidth: 2,
                        borderRadius: 8,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: '#0f172a',
                            callbacks: { label: (ctx) => '‚Çπ' + ctx.raw + ' Lakh' }
                        }
                    },
                    scales: {
                        x: { grid: { color: '#e2e8f0' }, ticks: { color: '#64748b' } },
                        y: { grid: { color: '#e2e8f0' }, ticks: { color: '#64748b', callback: (v) => '‚Çπ' + v + 'L' } }
                    }
                }
            });

            // Class Chart
            const classCtx = document.getElementById('classChart').getContext('2d');
            classChartInstance = new Chart(classCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Nursery', 'LKG', 'UKG', '1st', '2nd', '3rd', '4th', '5th', '6th', '7th', '8th', '9th', '10th', '11th', '12th'],
                    datasets: [{
                        data: [332, 328, 326, 333, 327, 322, 330, 333, 315, 310, 305, 298, 295, 290, 285],
                        backgroundColor: [
                            '#ec4899', '#f472b6', '#3b82f6', '#60a5fa', '#22c55e',
                            '#4ade80', '#f59e0b', '#fbbf24', '#8b5cf6', '#a78bfa',
                            '#06b6d4', '#22d3ee', '#ef4444', '#f87171', '#6366f1'
                        ],
                        borderColor: '#ffffff',
                        borderWidth: 3,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: { color: '#64748b', padding: 8, usePointStyle: true, font: { size: 10 } }
                        }
                    }
                }
            });
        }

        function initReportChart() {
            const ctx = document.getElementById('reportChart').getContext('2d');
            reportChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Nursery', 'LKG', 'UKG', '1st', '2nd', '3rd', '4th', '5th'],
                    datasets: [{
                        label: 'Students',
                        data: [332, 328, 326, 333, 327, 322, 330, 333],
                        backgroundColor: '#ec4899',
                        borderRadius: 8,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { grid: { color: '#e2e8f0' }, ticks: { color: '#64748b' } },
                        y: { grid: { color: '#e2e8f0' }, ticks: { color: '#64748b' } }
                    }
                }
            });
        }

        function updateChartTheme() {
            showNotification('Chart theme updated!', 'success');
        }

        function updateChartType() {
            showNotification('Chart type updated!', 'success');
        }

        // =============================================
        // BADGE HELPERS
        // =============================================
        function getModeBadge(mode) {
            const badges = {
                'UPI': 'badge-pink',
                'Cash': 'badge-blue',
                'Card': 'badge-success',
                'Cheque': 'badge-warning',
                'Bank Transfer': 'badge-blue'
            };
            return badges[mode] || 'badge-success';
        }

        function getStatusBadge(status) {
            const badges = {
                'paid': 'badge-success',
                'pending': 'badge-warning',
                'overdue': 'badge-danger'
            };
            return badges[status] || 'badge-success';
        }

        // =============================================
        // STUDENT FUNCTIONS
        // =============================================
        function submitNewStudent(e) {
            e.preventDefault();
            
            const newStudent = {
                id: 'STU-2026-' + String(studentsDB.length + 1).padStart(4, '0'),
                firstName: document.getElementById('newStudentFName').value,
                lastName: document.getElementById('newStudentLName').value,
                class: document.getElementById('newStudentClass').value,
                section: document.getElementById('newStudentSection').value,
                parent: document.getElementById('newStudentParent').value,
                contact: document.getElementById('newStudentContact').value,
                feeStatus: 'pending'
            };
            
            studentsDB.push(newStudent);
            renderStudentsTable();
            closeModal('newAdmission');
            showNotification('Student added successfully!', 'success');
            e.target.reset();
        }

        function viewStudent(studentId) {
            const student = studentsDB.find(s => s.id === studentId);
            if (!student) return;
            
            const content = document.getElementById('studentDetailsContent');
            content.innerHTML = `
                <div style="display: flex; align-items: center; gap: 14px; margin-bottom: 20px;">
                    <div style="width: 60px; height: 60px; border-radius: 16px; background: linear-gradient(135deg, var(--pink), #db2777); display: flex; align-items: center; justify-content: center;">
                        <span style="font-size: 20px; font-weight: 700; color: white;">${student.firstName.charAt(0)}${student.lastName.charAt(0)}</span>
                    </div>
                    <div>
                        <h3 style="font-size: 20px; font-weight: 700;">${student.firstName} ${student.lastName}</h3>
                        <p style="font-size: 13px; color: var(--grey);">${student.id}</p>
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px;">
                    <div class="card" style="padding: 14px; background: var(--grey-light);">
                        <p style="font-size: 12px; color: var(--grey);">Class</p>
                        <p style="font-weight: 600;">${student.class}-${student.section}</p>
                    </div>
                    <div class="card" style="padding: 14px; background: var(--grey-light);">
                        <p style="font-size: 12px; color: var(--grey);">Fee Status</p>
                        <p><span class="badge ${getStatusBadge(student.feeStatus)}">${student.feeStatus}</span></p>
                    </div>
                    <div class="card" style="padding: 14px; background: var(--grey-light);">
                        <p style="font-size: 12px; color: var(--grey);">Parent</p>
                        <p style="font-weight: 600;">${student.parent}</p>
                    </div>
                    <div class="card" style="padding: 14px; background: var(--grey-light);">
                        <p style="font-size: 12px; color: var(--grey);">Contact</p>
                        <p style="font-weight: 600;">${student.contact}</p>
                    </div>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-primary" style="flex: 1;" onclick="collectFeeFor('${student.id}')">Collect Fee</button>
                    <button class="btn btn-ghost" style="flex: 1;" onclick="editStudent('${student.id}')">Edit</button>
                </div>
            `;
            openModal('studentDetails');
        }

        function editStudent(studentId) {
            showNotification('Edit mode for: ' + studentId, 'info');
        }

        function collectFeeFor(studentId) {
            const student = studentsDB.find(s => s.id === studentId);
            if (student) {
                document.getElementById('feeStudentName').value = `${student.firstName} ${student.lastName}`;
                document.getElementById('feeStudentClass').value = `${student.class}-${student.section}`;
                document.getElementById('feeSearchStudent').value = student.id;
            }
            closeModal('studentDetails');
            openModal('collectFee');
        }

        function searchStudents() {
            const query = document.getElementById('studentSearchInput').value.toLowerCase();
            const filtered = studentsDB.filter(s => 
                s.firstName.toLowerCase().includes(query) ||
                s.lastName.toLowerCase().includes(query) ||
                s.id.toLowerCase().includes(query) ||
                s.class.toLowerCase().includes(query)
            );
            renderFilteredStudents(filtered);
        }

        function filterStudents() {
            let filtered = [...studentsDB];
            const classFilter = document.getElementById('classFilterSelect').value;
            const statusFilter = document.getElementById('statusFilterSelect').value;
            
            if (classFilter) filtered = filtered.filter(s => s.class === classFilter);
            if (statusFilter) filtered = filtered.filter(s => s.feeStatus === statusFilter);
            
            renderFilteredStudents(filtered);
        }

        function renderFilteredStudents(students) {
            const tbody = document.getElementById('studentsTableBody');
            tbody.innerHTML = students.map(s => `
                <tr>
                    <td style="font-family: monospace; font-size: 12px;">${s.id}</td>
                    <td style="font-weight: 500;">${s.firstName} ${s.lastName}</td>
                    <td>${s.class}-${s.section}</td>
                    <td>${s.parent}</td>
                    <td>${s.contact}</td>
                    <td><span class="badge ${getStatusBadge(s.feeStatus)}">${s.feeStatus}</span></td>
                    <td>
                        <div style="display: flex; gap: 6px;">
                            <button class="btn btn-ghost btn-sm" onclick="viewStudent('${s.id}')">View</button>
                            <button class="btn btn-ghost btn-sm" onclick="editStudent('${s.id}')">Edit</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        // =============================================
        // FEE FUNCTIONS
        // =============================================
        function searchFeeStudent() {
            const query = document.getElementById('feeSearchStudent').value.toLowerCase();
            if (query.length < 2) {
                document.getElementById('feeSearchResults').innerHTML = '';
                return;
            }
            
            const results = studentsDB.filter(s => 
                s.firstName.toLowerCase().includes(query) ||
                s.lastName.toLowerCase().includes(query) ||
                s.id.toLowerCase().includes(query)
            );
            
            if (results.length > 0) {
                document.getElementById('feeSearchResults').innerHTML = results.slice(0, 3).map(s => `
                    <div style="padding: 10px; background: var(--grey-light); border-radius: 8px; margin-bottom: 6px; cursor: pointer;" onclick="selectFeeStudent('${s.id}')">
                        <p style="font-weight: 500;">${s.firstName} ${s.lastName}</p>
                        <p style="font-size: 11px; color: var(--grey);">${s.id} | ${s.class}-${s.section}</p>
                    </div>
                `).join('');
            }
        }

        function selectFeeStudent(studentId) {
            const student = studentsDB.find(s => s.id === studentId);
            if (student) {
                document.getElementById('feeStudentName').value = `${student.firstName} ${student.lastName}`;
                document.getElementById('feeStudentClass').value = `${student.class}-${student.section}`;
                document.getElementById('feeSearchResults').innerHTML = '';
                document.getElementById('feeSearchStudent').value = '';
            }
        }

        function submitFeeCollection(e) {
            e.preventDefault();
            
            const receiptNo = 'REC-2026-' + String(receiptCounter++).padStart(6, '0');
            const now = new Date();
            
            document.getElementById('rcptNo').textContent = receiptNo;
            document.getElementById('rcptDate').textContent = now.toLocaleDateString('en-IN', { day: 'numeric', month: 'short', year: 'numeric' });
            document.getElementById('rcptStudent').textContent = document.getElementById('feeStudentName').value || 'Test Student';
            document.getElementById('rcptClass').textContent = document.getElementById('feeStudentClass').value || '-';
            document.getElementById('rcptFeeType').textContent = document.getElementById('feeTypeSelect').value;
            document.getElementById('rcptAmount').textContent = '‚Çπ' + parseInt(document.getElementById('feeAmountInput').value).toLocaleString('en-IN');
            document.getElementById('rcptMode').textContent = document.getElementById('feeModeSelect').value;
            
            paymentsDB.unshift({
                receipt: receiptNo,
                student: document.getElementById('feeStudentName').value || 'Test Student',
                class: document.getElementById('feeStudentClass').value || '-',
                amount: parseInt(document.getElementById('feeAmountInput').value),
                mode: document.getElementById('feeModeSelect').value,
                date: now.toLocaleDateString('en-IN', { day: 'numeric', month: 'short', year: 'numeric' })
            });
            
            renderRecentPayments();
            closeModal('collectFee');
            openModal('receipt');
            showNotification('Fee collected successfully!', 'success');
        }

        function filterFeeRecords(filter) {
            showNotification('Showing ' + filter + ' records', 'info');
        }

        function viewReceiptById(receiptNo) {
            const payment = paymentsDB.find(p => p.receipt === receiptNo);
            if (payment) {
                document.getElementById('rcptNo').textContent = payment.receipt;
                document.getElementById('rcptDate').textContent = payment.date;
                document.getElementById('rcptStudent').textContent = payment.student;
                document.getElementById('rcptClass').textContent = payment.class;
                document.getElementById('rcptFeeType').textContent = 'Tuition Fee';
                document.getElementById('rcptAmount').textContent = '‚Çπ' + payment.amount.toLocaleString('en-IN');
                document.getElementById('rcptMode').textContent = payment.mode;
                openModal('receipt');
            }
        }

        function printReceipt() {
            window.print();
        }

        // =============================================
        // QR LOOKUP
        // =============================================
        function startScan() {
            showNotification('Scanning...', 'info');
            setTimeout(() => {
                const randomStudent = studentsDB[Math.floor(Math.random() * studentsDB.length)];
                showLookupResult(randomStudent);
                showNotification('QR scanned successfully!', 'success');
            }, 1500);
        }

        function handleQRUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    // Show preview
                    document.getElementById('qrPreview').innerHTML = `<img src="${e.target.result}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 14px;">`;
                    showNotification('Image uploaded! Processing QR...', 'info');
                    
                    // Simulate QR processing
                    setTimeout(() => {
                        const randomStudent = studentsDB[Math.floor(Math.random() * studentsDB.length)];
                        showLookupResult(randomStudent);
                        showNotification('QR decoded successfully!', 'success');
                    }, 1500);
                };
                reader.readAsDataURL(file);
            }
        }

        function simulateScan() {
            const randomStudent = studentsDB[Math.floor(Math.random() * studentsDB.length)];
            closeModal('scanQR');
            showLookupResult(randomStudent);
            showNotification('QR scanned successfully!', 'success');
        }

        function manualLookup() {
            const studentId = document.getElementById('manualLookupId').value;
            if (!studentId) {
                showNotification('Please enter a student ID', 'error');
                return;
            }
            
            const student = studentsDB.find(s => s.id.toLowerCase() === studentId.toLowerCase());
            if (student) {
                showLookupResult(student);
            } else {
                document.getElementById('lookupResult').innerHTML = `<p style="color: var(--danger); font-size: 14px;">Student not found</p>`;
            }
        }

        function showLookupResult(student) {
            document.getElementById('lookupResult').innerHTML = `
                <div style="border: 2px solid var(--border); border-radius: 14px; padding: 18px; background: var(--grey-light);">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 14px;">
                        <div style="width: 48px; height: 48px; border-radius: 12px; background: linear-gradient(135deg, var(--pink), #db2777); display: flex; align-items: center; justify-content: center;">
                            <span style="font-weight: 600; color: white;">${student.firstName.charAt(0)}${student.lastName.charAt(0)}</span>
                        </div>
                        <div>
                            <p style="font-weight: 600; font-size: 16px;">${student.firstName} ${student.lastName}</p>
                            <p style="font-size: 12px; color: var(--grey);">${student.id}</p>
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; font-size: 13px; margin-bottom: 14px;">
                        <p style="color: var(--grey);">Class:</p>
                        <p style="font-weight: 500;">${student.class}-${student.section}</p>
                        <p style="color: var(--grey);">Parent:</p>
                        <p style="font-weight: 500;">${student.parent}</p>
                        <p style="color: var(--grey);">Contact:</p>
                        <p style="font-weight: 500;">${student.contact}</p>
                        <p style="color: var(--grey);">Fee Status:</p>
                        <p><span class="badge ${getStatusBadge(student.feeStatus)}">${student.feeStatus}</span></p>
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <button class="btn btn-primary btn-sm" style="flex: 1;" onclick="collectFeeFor('${student.id}')">Collect Fee</button>
                        <button class="btn btn-ghost btn-sm" style="flex: 1;" onclick="viewStudent('${student.id}')">Details</button>
                    </div>
                </div>
            `;
        }

        // =============================================
        // AI ASSISTANT
        // =============================================
        function sendAIMessage() {
            const input = document.getElementById('aiInputField');
            const message = input.value.trim();
            if (!message) return;
            
            const chatContainer = document.getElementById('chatMessages');
            
            chatContainer.innerHTML += `
                <div style="display: flex; gap: 12px; margin-bottom: 16px; justify-content: flex-end;">
                    <div style="background: linear-gradient(135deg, var(--pink-light), var(--blue-light)); border-radius: 16px; padding: 14px; max-width: 70%;">
                        <p style="font-size: 14px;">${message}</p>
                    </div>
                    <div style="width: 40px; height: 40px; border-radius: 12px; background: linear-gradient(135deg, var(--blue), #2563eb); display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 16px;">üë§</div>
                </div>
            `;
            
            input.value = '';
            
            setTimeout(() => {
                let response = '';
                const lowerMsg = message.toLowerCase();
                
                if (lowerMsg.includes('fee') || lowerMsg.includes('collection')) {
                    response = 'Current Fee Status:\n‚Ä¢ Total Expected: ‚Çπ22.98 Cr\n‚Ä¢ Collected: ‚Çπ11.05 Cr (48.1%)\n‚Ä¢ Pending: ‚Çπ11.92 Cr\n\nWould you like a detailed report?';
                } else if (lowerMsg.includes('student') || lowerMsg.includes('admission')) {
                    response = 'Student Statistics:\n‚Ä¢ Total: 4,817 students\n‚Ä¢ Classes: Nursery to 12th\n\nNew admissions are open!';
                } else if (lowerMsg.includes('defaulter') || lowerMsg.includes('pending')) {
                    response = '3,106 students have pending fees totaling ‚Çπ11.92 Cr.\n\nTop defaulters:\n1. 12th - 285 students\n2. 11th - 290 students';
                } else {
                    response = 'I can help you with:\n‚Ä¢ Fee collection queries\n‚Ä¢ Student information\n‚Ä¢ Report generation\n‚Ä¢ Data export\n\nWhat would you like to know?';
                }
                
                chatContainer.innerHTML += `
                    <div style="display: flex; gap: 12px; margin-bottom: 16px;">
                        <div style="width: 40px; height: 40px; border-radius: 12px; background: linear-gradient(135deg, var(--pink), #db2777); display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 16px;">ü§ñ</div>
                        <div style="background: var(--grey-light); border-radius: 16px; padding: 14px; max-width: 70%;">
                            <p style="font-size: 14px; white-space: pre-line;">${response}</p>
                        </div>
                    </div>
                `;
                
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }, 800);
        }

        function handleAIEnter(e) {
            if (e.key === 'Enter') sendAIMessage();
        }

        // =============================================
        // REPORTS
        // =============================================
        function generateReport(type) {
            showNotification('Generating ' + type + ' report...', 'info');
            setTimeout(() => {
                const messages = {
                    'collection': 'Collection: ‚Çπ11.05 Cr collected (48.1%)',
                    'defaulter': '3,106 students with pending fees',
                    'student': '4,817 active students',
                    'payment': 'UPI 49%, Cash 26%, Card 15%',
                    'admission': '500 new this session'
                };
                showNotification(messages[type] || 'Report generated', 'success');
            }, 1000);
        }

        function exportCurrentReport() {
            openModal('exportData');
        }

        // =============================================
        // EXPORT FUNCTIONS
        // =============================================
        function exportToExcel() {
            const exportType = document.getElementById('exportType').value;
            const exportClass = document.getElementById('exportClass').value;
            
            let data = [];
            let filename = '';
            
            if (exportType === 'all' || exportType === 'class') {
                let students = exportType === 'class' && exportClass ? studentsDB.filter(s => s.class === exportClass) : studentsDB;
                data = students.map(s => ({
                    'Student ID': s.id,
                    'First Name': s.firstName,
                    'Last Name': s.lastName,
                    'Class': s.class,
                    'Section': s.section,
                    'Parent Name': s.parent,
                    'Contact': s.contact,
                    'Fee Status': s.feeStatus
                }));
                filename = exportType === 'class' ? `Students_${exportClass}_Report` : 'All_Students_Report';
            } else if (exportType === 'fees') {
                data = paymentsDB.map(p => ({
                    'Receipt No': p.receipt,
                    'Student Name': p.student,
                    'Class': p.class,
                    'Amount': p.amount,
                    'Payment Mode': p.mode,
                    'Date': p.date
                }));
                filename = 'Fee_Records_Report';
            } else if (exportType === 'payments') {
                data = paymentsDB.map(p => ({
                    'Receipt No': p.receipt,
                    'Student Name': p.student,
                    'Class': p.class,
                    'Amount': p.amount,
                    'Payment Mode': p.mode,
                    'Date': p.date
                }));
                filename = 'Payment_History_Report';
            } else if (exportType === 'defaulters') {
                const defaulters = studentsDB.filter(s => s.feeStatus !== 'paid');
                data = defaulters.map(s => ({
                    'Student ID': s.id,
                    'Name': `${s.firstName} ${s.lastName}`,
                    'Class': `${s.class}-${s.section}`,
                    'Parent': s.parent,
                    'Contact': s.contact,
                    'Status': s.feeStatus
                }));
                filename = 'Defaulters_Report';
            }
            
            const ws = XLSX.utils.json_to_sheet(data);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, 'Report');
            XLSX.writeFile(wb, filename + '.xlsx');
            
            closeModal('exportData');
            showNotification('Excel exported successfully!', 'success');
        }

        function exportToPDF() {
            // Simple PDF generation using browser print
            const exportType = document.getElementById('exportType').value;
            let content = '';
            
            if (exportType === 'all' || exportType === 'class') {
                content = '<h2 style="text-align:center;">Students Report</h2>';
                content += '<table border="1" style="width:100%;border-collapse:collapse;">';
                content += '<tr><th>ID</th><th>Name</th><th>Class</th><th>Parent</th><th>Status</th></tr>';
                studentsDB.forEach(s => {
                    content += `<tr><td>${s.id}</td><td>${s.firstName} ${s.lastName}</td><td>${s.class}-${s.section}</td><td>${s.parent}</td><td>${s.feeStatus}</td></tr>`;
                });
                content += '</table>';
            } else {
                content = '<h2 style="text-align:center;">Payment Report</h2>';
                content += '<table border="1" style="width:100%;border-collapse:collapse;">';
                content += '<tr><th>Receipt</th><th>Student</th><th>Amount</th><th>Mode</th><th>Date</th></tr>';
                paymentsDB.forEach(p => {
                    content += `<tr><td>${p.receipt}</td><td>${p.student}</td><td>‚Çπ${p.amount}</td><td>${p.mode}</td><td>${p.date}</td></tr>`;
                });
                content += '</table>';
            }
            
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                <head><title>Export PDF</title>
                <style>body{font-family:Arial,sans-serif;padding:20px;}table{width:100%;border-collapse:collapse;}th,td{border:1px solid #ddd;padding:8px;text-align:left;}th{background:#ec4899;color:white;}</style>
                </head>
                <body>${content}</body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
            
            closeModal('exportData');
            showNotification('PDF export initiated!', 'success');
        }

        function importData(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const data = new Uint8Array(e.target.result);
                    const workbook = XLSX.read(data, { type: 'array' });
                    const firstSheet = workbook.Sheets[workbook.SheetNames[0]];
                    const jsonData = XLSX.utils.sheet_to_json(firstSheet);
                    
                    // Add imported students to database
                    jsonData.forEach(row => {
                        if (row['Student ID'] || row['First Name']) {
                            studentsDB.push({
                                id: row['Student ID'] || 'STU-2026-' + String(studentsDB.length + 1).padStart(4, '0'),
                                firstName: row['First Name'] || '',
                                lastName: row['Last Name'] || '',
                                class: row['Class'] || 'Nursery',
                                section: row['Section'] || 'A',
                                parent: row['Parent Name'] || '',
                                contact: row['Contact'] || '',
                                feeStatus: row['Fee Status'] || 'pending'
                            });
                        }
                    });
                    
                    renderStudentsTable();
                    showNotification(`${jsonData.length} records imported successfully!`, 'success');
                };
                reader.readAsArrayBuffer(file);
            }
        }

        // =============================================
        // SETTINGS
        // =============================================
        function saveSettings() {
            showNotification('Settings saved!', 'success');
        }

        function backupData() {
            const data = {
                students: studentsDB,
                payments: paymentsDB,
                activity: activityDB
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'school_backup_' + new Date().toISOString().slice(0,10) + '.json';
            a.click();
            URL.revokeObjectURL(url);
            
            showNotification('Backup created successfully!', 'success');
        }

        function clearData() {
            if (confirm('Clear all data? This cannot be undone.')) {
                studentsDB.length = 0;
                paymentsDB.length = 0;
                renderStudentsTable();
                renderRecentPayments();
                showNotification('All data cleared', 'warning');
            }
        }

        // =============================================
        // NOTIFICATIONS
        // =============================================
        function showNotification(message, type) {
            const colors = {
                success: '#22c55e',
                error: '#ef4444',
                warning: '#f59e0b',
                info: '#3b82f6'
            };
            
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.style.background = colors[type] || colors.info;
            notification.innerHTML = `
                <span>${message}</span>
                <button onclick="this.parentElement.remove()" style="background: none; border: none; color: white; cursor: pointer; margin-left: 10px; font-size: 18px;">√ó</button>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => notification.remove(), 300);
            }, 3500);
        }
    </script>
</body>
</html>
